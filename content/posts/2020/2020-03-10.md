---
title: "使用Go做业务开发时，怎样不侵入业务逻辑地改动 ?"
date: 2020-03-10T21:42:33+08:00
draft: true
---

前几天在Telegram的Go开发者群里有人提了这样一个问题，大致是这么个意思:
> 客户端通过http请求服务A,然后服务A请求服务B,这时候需要将客户端请求A时的某个header传给服务B,如何做能尽可能小地影响业务逻辑？


作为一名使用写了好几年CURD的gopher, 我自己也经常面临这样的问题：如果队某段逻辑改动太大，很可能就会影响到其他的逻辑；在业务逻辑复杂的情况下，理论上你做的每一个修改，都可能会导致不可预料的后果。而根据墨菲定律，*事情如果有变坏的可能，不管这种可能性有多小，它总会发生*，所以，在写业务的时候，有些改动如果能做到不侵入业务逻辑，那么可以减少很多不必要的麻烦。

我根据我平时CURD的经验，给出的答案是将header塞进context中，群里另一位大佬给的方案是使用标准库中的`ReverseProxy`。当然，这两种方案都能达到目的，所以这里我们看一下这两种方法的实现。

假设原有的函数逻辑是这样的：
```go

func HandlerA(w http.ResponseWriter, r *http.Request){


}


```
